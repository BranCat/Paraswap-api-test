"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("paraswap-core"),r=require("ts-essentials");function e(t,r,e,n,a,s,o){try{var u=t[s](o),i=u.value}catch(t){return void e(t)}u.done?r(i):Promise.resolve(i).then(n,a)}function n(t){return function(){var r=this,n=arguments;return new Promise((function(a,s){var o=t.apply(r,n);function u(t){e(o,a,s,u,i,"next",t)}function i(t){e(o,a,s,u,i,"throw",t)}u(void 0)}))}}function a(){return a=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},a.apply(this,arguments)}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}function o(t,r){return o=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t},o(t,r)}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function i(t,r,e){return i=u()?Reflect.construct:function(t,r,e){var n=[null];n.push.apply(n,r);var a=new(Function.bind.apply(t,n));return e&&o(a,e.prototype),a},i.apply(null,arguments)}function c(t){var r="function"==typeof Map?new Map:void 0;return c=function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(t))return r.get(t);r.set(t,e)}function e(){return i(t,arguments,s(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),o(e,t)},c(t)}function p(t,r){if(null==t)return{};var e,n,a={},s=Object.keys(t);for(n=0;n<s.length;n++)r.indexOf(e=s[n])>=0||(a[e]=t[e]);return a}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var f={exports:{}};!function(t){var r=function(t){var r,e=Object.prototype,n=e.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function i(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{i({},"")}catch(t){i=function(t,r,e){return t[r]=e}}function c(t,r,e,n){var a=Object.create((r&&r.prototype instanceof m?r:m).prototype),s=new I(n||[]);return a._invoke=function(t,r,e){var n=d;return function(a,s){if(n===l)throw new Error("Generator is already running");if(n===h){if("throw"===a)throw s;return P()}for(e.method=a,e.arg=s;;){var o=e.delegate;if(o){var u=O(o,e);if(u){if(u===v)continue;return u}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if(n===d)throw n=h,e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n=l;var i=p(t,r,e);if("normal"===i.type){if(n=e.done?h:f,i.arg===v)continue;return{value:i.arg,done:e.done}}"throw"===i.type&&(n=h,e.method="throw",e.arg=i.arg)}}}(t,e,s),a}function p(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var d="suspendedStart",f="suspendedYield",l="executing",h="completed",v={};function m(){}function k(){}function y(){}var g={};i(g,s,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(R([])));x&&x!==e&&n.call(x,s)&&(g=x);var A=y.prototype=m.prototype=Object.create(g);function b(t){["next","throw","return"].forEach((function(r){i(t,r,(function(t){return this._invoke(r,t)}))}))}function T(t,r){function e(a,s,o,u){var i=p(t[a],t,s);if("throw"!==i.type){var c=i.arg,d=c.value;return d&&"object"==typeof d&&n.call(d,"__await")?r.resolve(d.__await).then((function(t){e("next",t,o,u)}),(function(t){e("throw",t,o,u)})):r.resolve(d).then((function(t){c.value=t,o(c)}),(function(t){return e("throw",t,o,u)}))}u(i.arg)}var a;this._invoke=function(t,n){function s(){return new r((function(r,a){e(t,n,r,a)}))}return a=a?a.then(s,s):s()}}function O(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,O(t,e),"throw"===e.method))return v;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var a=p(n,t.iterator,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,v;var s=a.arg;return s?s.done?(e[t.resultName]=s.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,v):s:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,v)}function S(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function L(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function R(t){if(t){var e=t[s];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function e(){for(;++a<t.length;)if(n.call(t,a))return e.value=t[a],e.done=!1,e;return e.value=r,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:r,done:!0}}return k.prototype=y,i(A,"constructor",y),i(y,"constructor",k),k.displayName=i(y,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===k||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,i(t,u,"GeneratorFunction")),t.prototype=Object.create(A),t},t.awrap=function(t){return{__await:t}},b(T.prototype),i(T.prototype,o,(function(){return this})),t.AsyncIterator=T,t.async=function(r,e,n,a,s){void 0===s&&(s=Promise);var o=new T(c(r,e,n,a),s);return t.isGeneratorFunction(e)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},b(A),i(A,u,"Generator"),i(A,s,(function(){return this})),i(A,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=R,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(L),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function a(n,a){return u.type="throw",u.arg=t,e.next=n,a&&(e.method="next",e.arg=r),!!a}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],u=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var i=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(i&&c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var s=a;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=r&&r<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=t,o.arg=r,s?(this.method="next",this.next=s.finallyLoc,v):this.complete(o)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),v},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),L(e),v}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var a=n.arg;L(e)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:R(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),v}},t}(t.exports);try{regeneratorRuntime=r}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}}(f);var l=f.exports,h="https://api.paraswap.io";function v(t){for(var r=arguments.length,e=new Array(r>1?r-1:0),n=1;n<r;n++)e[n-1]=arguments[n];return e.every((function(r){return"function"==typeof t[r]}))}function m(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),a=1;a<e;a++)n[a-1]=arguments[a];r.assert(v.apply(void 0,[t].concat(n)),"Contract must have methods: "+n.join(", "))}function k(t){for(var r=arguments.length,e=new Array(r>1?r-1:0),n=1;n<r;n++)e[n-1]=arguments[n];return e.every((function(r){return"function"==typeof t.methods[r]}))}function y(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),a=1;a<e;a++)n[a-1]=arguments[a];r.assert(k.apply(void 0,[t].concat(n)),"Contract must have methods: "+n.join(", "))}var g=function(t){var r=Object.entries(t).filter((function(t){return void 0!==t[1]})).map((function(t){return[t[0],String(t[1])]})),e=new URLSearchParams(r).toString();return e&&"?"+e},w=function(t){return t instanceof x},x=function(t){var r,e;function n(r){var e,a=r.code,s=r.request,o=r.response,u=r.isAxiosError,i=r.message;if((e=t.call(this)||this).code=void 0,e.status=void 0,e.request=void 0,e.response=void 0,e.isAxiosError=!1,Error.captureStackTrace&&Error.captureStackTrace(d(e),n),e.name=e.constructor.name,e.code=a,e.request=s,e.isAxiosError=u,!o)return e.message=i,d(e);e.response=o;var c=o.data;return e.status=o.status,e.message=A(c)?c.error:i,e}return e=t,(r=n).prototype=Object.create(e.prototype),r.prototype.constructor=r,o(r,e),n}(c(Error));function A(t){return!!(r=t)&&"object"==typeof r&&"string"==typeof t.error;var r}var b=function(t){return t.length>0};function T(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER)}var O=function(t){var r,e,a=t.apiURL,s=t.fetcher,o=(void 0===a?h:a)+"/adapters/contracts?network="+t.chainId,u=function(){var t=n(l.mark((function t(r){return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s({url:o,method:"GET",signal:r});case 2:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}(),i=(r=u,function(){var t;return null!=(t=e)?t:e=r.apply(void 0,arguments)}),c=function(){var t=n(l.mark((function t(r){return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i(r);case 2:return t.abrupt("return",t.sent.TokenTransferProxy);case 5:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}(),p=function(){var t=n(l.mark((function t(r){return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i(r);case 2:return t.abrupt("return",t.sent.AugustusSwapper);case 5:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}(),d=function(){var t=n(l.mark((function t(r){return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i(r);case 2:return t.abrupt("return",t.sent.AugustusRFQ);case 5:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}();return{getContracts:i,getSpender:c,getAugustusSwapper:p,getAugustusRFQ:d}},S=[{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}];function L(t,r){return function(){var e=n(l.mark((function e(n,a,s,o){var u;return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===s&&(s={}),e.next=3,r(o);case 3:return u=e.sent,e.next=6,t.transactCall({address:a,abi:S,contractMethod:"approve",args:[u,n],overrides:s});case 6:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t,r,n,a){return e.apply(this,arguments)}}()}var I,R=function(t){var r=O(t),e=L(t.contractCaller,r.getSpender),a=function(){var t=n(l.mark((function t(r,n,a,s){return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Promise.all(n.map((function(t){return e(r,t,a,s)}))));case 1:case"end":return t.stop()}}),t)})));return function(r,e,n,a){return t.apply(this,arguments)}}();return{approveToken:e,approveTokenBulk:a}},P=["tokenType","mainConnector","connectors","network"],C=function(t){var r=t.tokenType,e=void 0===r?"ERC20":r,n=t.mainConnector,s=void 0===n?"ETH":n,o=t.connectors,u=void 0===o?[]:o,i=t.network,c=void 0===i?1:i,d=p(t,P);return a({tokenType:e,connectors:u.length>0?u:[s],mainConnector:s,network:c},d)},E={message:"Not Found"},F=function(t){var r=t.apiURL,e=t.fetcher,a=(void 0===r?h:r)+"/users/tokens/"+t.chainId,s=function(){var t=n(l.mark((function t(r,n){var s,o;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=a+"/"+r,t.next=3,e({url:s,method:"GET",signal:n});case 3:return o=t.sent.tokens.map(C),t.abrupt("return",o);case 6:case"end":return t.stop()}}),t)})));return function(r,e){return t.apply(this,arguments)}}(),o=function(){var t=n(l.mark((function t(r,n,s){var o,u;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=a+"/"+r+"/"+n,t.next=3,e({url:o,method:"GET",signal:s});case 3:if((u=t.sent).token){t.next=6;break}return t.abrupt("return",E);case 6:return t.abrupt("return",C(u.token));case 7:case"end":return t.stop()}}),t)})));return function(r,e,n){return t.apply(this,arguments)}}(),u=function(){var t=n(l.mark((function t(r,e,n){var a,o;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=new Set(e.map((function(t){return t.toLowerCase()}))),t.next=3,s(r,n);case 3:return o=t.sent.filter((function(t){return a.has(t.address.toLowerCase())})).map((function(t){var r=t.allowance;return{tokenAddress:t.address,allowance:void 0===r?"0":r}})),t.abrupt("return",o);case 6:case"end":return t.stop()}}),t)})));return function(r,e,n){return t.apply(this,arguments)}}(),i=function(){var t=n(l.mark((function t(r,e,n){var a,s;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o(r,e,n);case 2:if(!("message"in(a=t.sent))){t.next=5;break}return t.abrupt("return",a);case 5:return t.abrupt("return",{tokenAddress:a.address,allowance:void 0===(s=a.allowance)?"0":s});case 7:case"end":return t.stop()}}),t)})));return function(r,e,n){return t.apply(this,arguments)}}();return{getBalance:o,getBalances:s,getAllowance:i,getAllowances:u}},B=function(t){var r=t.apiURL,e=void 0===r?h:r,a=t.chainId,s=t.fetcher;function o(){return(o=n(l.mark((function t(r,n){var o,u;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=g({network:a,namesOnly:r&&"namesOnly"in r?r.namesOnly:void 0}),u=e+"/adapters"+("list"===(null==r?void 0:r.type)?"/list":"")+o,t.next=4,s({url:u,method:"GET",signal:n});case 4:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return{getAdapters:function(t,r){return o.apply(this,arguments)}}},M=["srcToken","destToken"],N=["route"],U=["options"],D=["excludePricingMethods","excludeContractMethods","includeContractMethods","adapterVersion","partner","includeDEXS","excludeDEXS","excludePools"];!function(t){t.megapath="megapath",t.multipath="multipath",t.simplepath="simplepath"}(I||(I={}));var _=function(t){var r=t.apiURL,e=t.chainId,s=t.fetcher,o=(void 0===r?h:r)+"/prices",u=function(){var t=n(l.mark((function t(r,n){var u,i,c,d,f,h;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=r.srcToken,i=r.destToken,c=p(r,M),d=j(c),f=g(a({srcToken:u,destToken:i,network:e},d)),h=o+"/"+f,t.next=6,s({url:h,method:"GET",signal:n});case 6:return t.abrupt("return",t.sent.priceRoute);case 8:case"end":return t.stop()}}),t)})));return function(r,e){return t.apply(this,arguments)}}(),i=function(){var t=n(l.mark((function t(r,n){var u,i,c,d,f,h;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u=r.route,i=p(r,N),!(u.length<2)){t.next=3;break}throw new Error("Invalid Route");case 3:return c=j(i),d=u.join("-"),f=g(a({route:d,network:e},c)),h=o+"/"+f,t.next=9,s({url:h,method:"GET",signal:n});case 9:return t.abrupt("return",t.sent.priceRoute);case 11:case"end":return t.stop()}}),t)})));return function(r,e){return t.apply(this,arguments)}}();return{getRate:u,getRateByRoute:i}};function j(t){var r=t.options,e=void 0===r?{}:r,n=p(t,U),s=e.excludePricingMethods,o=e.excludeContractMethods,u=e.includeContractMethods,i=e.adapterVersion,c=e.partner,d=void 0===c?"paraswap.io":c,f=e.includeDEXS,l=e.excludeDEXS,h=e.excludePools,v=p(e,D),m=[f,l,h,s,o,u].map((function(t){return(null==t?void 0:t.join(","))||void 0}));return a({version:i,excludePricingMethods:m[3],excludeContractMethods:m[4],includeContractMethods:m[5],partner:d,includeDEXS:m[0],excludeDEXS:m[1],excludePools:m[2]},n,v)}var G=function(t){var r=t.apiURL,e=t.fetcher,a=(void 0===r?h:r)+"/tokens/"+t.chainId,s=function(){var t=n(l.mark((function t(r){var n;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e({url:a,method:"GET",signal:r});case 2:return n=t.sent.tokens.map(C),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}();return{getTokens:s}};function z(t){return function(r){var e=r.chainId,n=r.apiURL;return function(r){return r?n+"/"+t+"/"+("LIMIT"===r?"orders":"p2p")+"/"+e:n+"/"+t+"/order"}}}function H(t){return{nonceAndMeta:t.nonceAndMeta,expiry:t.expiry,makerAsset:t.makerAsset,takerAsset:t.takerAsset,maker:t.maker,taker:t.taker,makerAmount:t.makerAmount,takerAmount:t.takerAmount}}var q=z("ft"),Q="0x0000000000000000000000000000000000000000",X=[{name:"nonceAndMeta",type:"uint256"},{name:"expiry",type:"uint128"},{name:"makerAsset",type:"uint256"},{name:"makerAssetId",type:"uint256"},{name:"takerAsset",type:"uint256"},{name:"takerAssetId",type:"uint256"},{name:"maker",type:"address"},{name:"taker",type:"address"},{name:"makerAmount",type:"uint256"},{name:"takerAmount",type:"uint256"}];function W(t){var r=t.chainId,e=t.verifyingContract,n=t.nonce,a=void 0===n?T():n,s=t.expiry,o=t.makerAsset,u=t.takerAsset,i=t.makerAmount,c=t.takerAmount,p=t.makerAssetId,d=t.takerAssetId,f=void 0===d?"0":d,l=t.makerAssetType,h=t.takerAssetType,v=t.maker,m=t.AugustusAddress,k=t.taker,y=(BigInt(void 0===k?Q:k)+(BigInt(a)<<BigInt(160))).toString(10),g=Y(o,l),w=Y(u,h);return{types:{OrderNFT:X},domain:{name:"AUGUSTUS RFQ",version:"1",chainId:r,verifyingContract:e},data:{nonceAndMeta:y,expiry:s,makerAsset:g,takerAsset:w,maker:v,taker:m,makerAmount:i,takerAmount:c,makerAssetId:p,takerAssetId:f}}}function Y(t,r){return(BigInt(t)+(BigInt(r)<<BigInt(160))).toString(10)}function J(t){var r=t.makerAsset,e=t.takerAsset,n=t.maker,a=t.taker,s=t.makerAmount,o=t.takerAmount,u=t.makerAssetId,i=t.takerAssetId,c=t.makerAssetType,p=t.takerAssetType;return{nonceAndMeta:t.nonceAndMeta,expiry:t.expiry,makerAsset:void 0!==c&&r.startsWith("0x")?Y(r,c):r,takerAsset:void 0!==p&&e.startsWith("0x")?Y(e,p):e,maker:n,taker:a,makerAmount:s,takerAmount:o,makerAssetId:u,takerAssetId:i}}var K=z("nft"),V=function(e){var s=e.apiURL,o=e.fetcher,u=(void 0===s?h:s)+"/transactions/"+e.chainId,i=function(){var e=n(l.mark((function e(n,s,i){var c,p,d,f,h,v;return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===s&&(s={}),"priceRoute"in n&&"destAmount"in n&&!("orders"in n)&&(p=(c=n.priceRoute.side)===t.SwapSide.SELL?"Source Amount Mismatch":"Destination Amount Mismatch",r.assert($({queryParams:n,side:c,priceRoute:n.priceRoute}),p)),d=g(s),f=u+"/"+d,h="orders"in n&&n.orders.length>0?a({},n,{orders:n.orders.map((function(t){var r=a({},"makerAssetId"in t||"takerAssetId"in t?J(t):H(t),{signature:t.signature});return t.permitMakerAsset&&(r.permitMakerAsset=t.permitMakerAsset),r}))}):n,v={url:f,method:"POST",data:h,signal:i},e.next=8,o(v);case 8:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}();return{buildTx:i}};function $(r){var e=r.queryParams,n=r.side,a=r.priceRoute;if(e.slippage)return n===t.SwapSide.BUY&&e.destAmount===a.destAmount||n===t.SwapSide.SELL&&e.srcAmount===a.srcAmount;var s=n===t.SwapSide.SELL?[e.srcAmount,a.srcAmount]:[e.destAmount,a.destAmount];return s[0]===s[1]}var Z=[{name:"nonceAndMeta",type:"uint256"},{name:"expiry",type:"uint128"},{name:"makerAsset",type:"address"},{name:"takerAsset",type:"address"},{name:"maker",type:"address"},{name:"taker",type:"address"},{name:"makerAmount",type:"uint256"},{name:"takerAmount",type:"uint256"}];function tt(t){var r=t.chainId,e=t.verifyingContract,n=t.nonce,a=void 0===n?T():n,s=t.expiry,o=t.makerAsset,u=t.takerAsset,i=t.makerAmount,c=t.takerAmount,p=t.maker,d=t.AugustusAddress,f=t.taker,l=void 0===f?Q:f,h=(BigInt(l)+(BigInt(a)<<BigInt(160))).toString(10);return{types:{Order:Z},domain:{name:"AUGUSTUS RFQ",version:"1",chainId:r,verifyingContract:e},data:{nonceAndMeta:h,expiry:s,makerAsset:o,takerAsset:u,maker:p,taker:l===Q?Q:d,makerAmount:i,takerAmount:c}}}var rt=function(t){var r=t.chainId,e=O(t).getContracts,s=function(){var t=n(l.mark((function t(n,s){var o;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(s);case 2:return t.abrupt("return",tt(a({},n,{chainId:r,verifyingContract:(o=t.sent).AugustusRFQ,AugustusAddress:o.AugustusSwapper})));case 6:case"end":return t.stop()}}),t)})));return function(r,e){return t.apply(this,arguments)}}();return{buildLimitOrder:s}},et=function(t){return{signLimitOrder:function(r){var e=a({},r,{data:H(r.data)});return t.contractCaller.signTypedDataCall(e)}}},nt=[{inputs:[{internalType:"bytes32",name:"orderHash",type:"bytes32"}],name:"cancelOrder",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32[]",name:"orderHashes",type:"bytes32[]"}],name:"cancelOrders",outputs:[],stateMutability:"nonpayable",type:"function"}],at=function(t){var r=O(t).getAugustusRFQ,e=function(){var e=n(l.mark((function e(n,a,s){var o;return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===a&&(a={}),e.next=3,r(s);case 3:return o=e.sent,e.next=6,t.contractCaller.transactCall({address:o,abi:nt,contractMethod:"cancelOrder",args:[n],overrides:a});case 6:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),a=function(){var e=n(l.mark((function e(n,a,s){var o;return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===a&&(a={}),e.next=3,r(s);case 3:return o=e.sent,e.next=6,t.contractCaller.transactCall({address:o,abi:nt,contractMethod:"cancelOrders",args:[n],overrides:a});case 6:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}();return{cancelLimitOrder:e,cancelLimitOrderBulk:a}},st=function(t){var r=t.apiURL,e=t.fetcher,a=q({apiURL:void 0===r?h:r,chainId:t.chainId}),s=function(){var t=n(l.mark((function t(r,n){var s,o,u,i;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=a(r.type),o="maker"in r?"maker/"+r.maker:"taker/"+r.taker,u=g({offset:r.offset,limit:r.limit,hideSmallBalances:r.hideSmallBalances}),i=s+"/"+o+u,t.next=7,e({url:i,method:"GET",signal:n});case 7:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)})));return function(r,e){return t.apply(this,arguments)}}(),o=function(){var t=n(l.mark((function t(r,n){var s,o;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=a(),o=s+"/"+r,t.next=4,e({url:o,method:"GET",signal:n});case 4:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})));return function(r,e){return t.apply(this,arguments)}}();return{getLimitOrders:s,getLimitOrderByHash:o}},ot=function(t){var r=t.apiURL,e=t.fetcher,a=q({apiURL:void 0===r?h:r,chainId:t.chainId}),s=function(){var t=n(l.mark((function t(r,n,s){var o;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=a(n),t.next=3,e({url:o,method:"POST",data:r,signal:s});case 3:return t.abrupt("return",t.sent.order);case 6:case"end":return t.stop()}}),t)})));return function(r,e,n){return t.apply(this,arguments)}}();return{postLimitOrder:function(t,r){return s(t,"LIMIT",r)},postP2POrder:function(t,r){return s(t,"P2P",r)}}},ut=function(t){var r=O(t);return{approveMakerTokenForLimitOrder:L(t.contractCaller,r.getAugustusRFQ),approveTakerTokenForLimitOrder:R(t).approveToken}},it=function(t){var r=O(t);return{getLimitOrdersContract:r.getAugustusRFQ,getTokenTransferProxy:r.getSpender}},ct=["srcToken","destToken","amount","options"],pt=function(e){var s=e.apiURL,o=void 0===s?h:s,u=e.chainId,i=e.fetcher,c=V({apiURL:o,chainId:u,fetcher:i}).buildTx,d=_({apiURL:o,chainId:u,fetcher:i}).getRate,f=function(){var e=n(l.mark((function e(n,s,o){var u,i,c,f,h,v,m,k,y,g,w;return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=n.srcToken,i=n.destToken,c=n.amount,h=void 0===(f=n.options)?{}:f,v=p(n,ct),r.assert(s.length>0,"must pass at least 1 order"),m=dt(s),k=m.totalTakerAmount,r.assert(m.takerAsset.toLowerCase()===i.toLowerCase(),"All orders must have the same takerAsset as destToken"),y=k.toString(10),c&&r.assert(c===y,"`amount` must equal the total of the orders' `takerAmounts`"),g=a({},h,{includeContractMethods:[t.ContractMethod.simpleBuy]}),w=a({},v,{srcToken:u,destToken:i,amount:y,side:t.SwapSide.BUY,options:g}),e.next=11,d(w,o);case 11:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}();return{getLimitOrdersRate:f,buildLimitOrderTx:function(t,r,e){var n=dt(t.orders),s=n.makerAsset,o=a({},t,{srcToken:n.takerAsset,srcAmount:n.totalTakerAmount.toString(10),destToken:s});return c(o,r,e)},buildSwapAndLimitOrderTx:function(t,r,e){var n=dt(t.orders),s=a({},t,{srcToken:t.priceRoute.srcToken,destToken:n.makerAsset,destDecimals:t.priceRoute.destDecimals},t.slippage?{slippage:t.slippage}:{srcAmount:t.priceRoute.srcAmount,slippage:void 0});return c(s,r,e)}}};function dt(t){r.assert(b(t),"must pass at least 1 order");var e=t.reduce((function(t,r){return t.takerAssetsSet.add(r.takerAsset.toLowerCase()),t.makerAssetsSet.add(r.makerAsset.toLowerCase()),t.totalTakerAmount=t.totalTakerAmount+BigInt(r.takerAmount),t}),{takerAssetsSet:new Set,makerAssetsSet:new Set,totalTakerAmount:BigInt(0)}),n=e.makerAssetsSet,a=e.totalTakerAmount;r.assert(1===e.takerAssetsSet.size,"All orders must have the same takerAsset as destToken"),r.assert(1===n.size,"All orders must have the same makerAsset");var s=t[0];return{totalTakerAmount:a,maker:s.maker,taker:s.taker,makerAsset:s.makerAsset,takerAsset:s.takerAsset}}var ft=function(t){var r=t.chainId,e=O(t).getContracts,s=function(){var t=n(l.mark((function t(n,s){var o;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(s);case 2:return t.abrupt("return",W(a({},n,{chainId:r,verifyingContract:(o=t.sent).AugustusRFQ,AugustusAddress:o.AugustusSwapper})));case 6:case"end":return t.stop()}}),t)})));return function(r,e){return t.apply(this,arguments)}}();return{buildNFTOrder:s}},lt=function(t){return{signNFTOrder:function(r){var e=a({},r,{data:J(r.data)});return t.contractCaller.signTypedDataCall(e)}}},ht=function(t){var r=at(t);return{cancelNFTOrder:r.cancelLimitOrder,cancelNFTOrderBulk:r.cancelLimitOrderBulk}},vt=function(t){var r=t.apiURL,e=t.fetcher,a=K({apiURL:void 0===r?h:r,chainId:t.chainId}),s=function(){var t=n(l.mark((function t(r,n){var s,o;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=a(r.type),o=s+"/"+("maker"in r?"maker/"+r.maker:"taker/"+r.taker),t.next=5,e({url:o,method:"GET",signal:n});case 5:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})));return function(r,e){return t.apply(this,arguments)}}(),o=function(){var t=n(l.mark((function t(r,n){var s,o;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=a(),o=s+"/"+r,t.next=4,e({url:o,method:"GET",signal:n});case 4:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})));return function(r,e){return t.apply(this,arguments)}}();return{getNFTOrders:s,getNFTOrderByHash:o}},mt=function(t){var r=t.apiURL,e=t.fetcher,s=K({apiURL:void 0===r?h:r,chainId:t.chainId}),o=function(){var t=n(l.mark((function t(r,n,o){var u;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=s(n),t.next=3,e({url:u,method:"POST",data:r,signal:o});case 3:return t.abrupt("return",a({},t.sent.order));case 6:case"end":return t.stop()}}),t)})));return function(r,e,n){return t.apply(this,arguments)}}();return{postNFTLimitOrder:function(t,r){return o(t,"LIMIT",r)},postNFTP2POrder:function(t,r){return o(t,"P2P",r)}}},kt=function(t){var r=O(t);return{getNFTOrdersContract:r.getAugustusRFQ,getTokenTransferProxy:r.getSpender}},yt=[{constant:!1,inputs:[{name:"_operator",type:"address"},{name:"_approved",type:"bool"}],name:"setApprovalForAll",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"}],gt=function(t){var r=R(t).approveToken,e=(0,kt(t).getNFTOrdersContract)(),a=function(){var r=n(l.mark((function r(n,a){return l.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return void 0===a&&(a={}),r.next=3,t.contractCaller.transactCall({address:n,abi:yt,contractMethod:"setApprovalForAll",args:[e,!0],overrides:a});case 3:return r.abrupt("return",r.sent);case 5:case"end":return r.stop()}}),r)})));return function(t,e){return r.apply(this,arguments)}}();return{approveERC20ForNFTOrder:r,approveNFTorNFTOrder:a}},wt=["srcToken","destToken","amount","options"],xt=function(e){var s=e.apiURL,o=void 0===s?h:s,u=e.chainId,i=e.fetcher,c=V({apiURL:o,chainId:u,fetcher:i}).buildTx,d=_({apiURL:o,chainId:u,fetcher:i}).getRate,f=function(){var e=n(l.mark((function e(n,s,o){var u,i,c,f,h,v,m,k,y,g,w;return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=n.srcToken,i=n.destToken,c=n.amount,h=void 0===(f=n.options)?{}:f,v=p(n,wt),r.assert(s.length>0,"must pass at least 1 order"),m=At(s),k=m.totalTakerAmount,r.assert(m.takerAsset.toLowerCase()===i.toLowerCase(),"All orders must have the same takerAsset as destToken"),y=k.toString(10),c&&r.assert(c===y,"`amount` must equal the total of the orders' `takerAmounts`"),g=a({},h,{includeContractMethods:[t.ContractMethod.simpleBuy]}),w=a({},v,{srcToken:u,destToken:i,amount:y,side:t.SwapSide.BUY,options:g}),e.next=11,d(w,o);case 11:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}();return{getNFTOrdersRate:f,buildNFTOrderTx:function(t,r,e){var n=At(t.orders),s=a({},t,{srcToken:n.takerAsset,srcAmount:n.totalTakerAmount.toString(10),destToken:"NFT"});return c(s,r,e)},buildSwapAndNFTOrderTx:function(t,r,e){At(t.orders);var n=a({},t,{srcToken:t.priceRoute.srcToken},t.slippage?{slippage:t.slippage}:{srcAmount:t.priceRoute.srcAmount,slippage:void 0},{destToken:"NFT",destDecimals:t.priceRoute.destDecimals});return c(n,r,e)}}};function At(t){r.assert(b(t),"must pass at least 1 order");var e=t.reduce((function(t,r){return t.takerAssetsSet.add(r.takerAsset.toLowerCase()),t.makerAssetsSet.add(r.makerAsset.toLowerCase()),t.totalTakerAmount=t.totalTakerAmount+BigInt(r.takerAmount),t}),{takerAssetsSet:new Set,makerAssetsSet:new Set,totalTakerAmount:BigInt(0)}),n=e.makerAssetsSet,a=e.totalTakerAmount;r.assert(1===e.takerAssetsSet.size,"All orders must have the same takerAsset as destToken"),r.assert(1===n.size,"All orders must have the same makerAsset");var s=t[0],o=s.makerAsset,u=s.takerAsset;return{totalTakerAmount:a,maker:s.maker,taker:s.taker,makerAsset:o.startsWith("0x")?o:bt(o),takerAsset:u.startsWith("0x")?u:bt(u)}}function bt(t){return"0x"+(BigInt(t)&(BigInt(1)<<BigInt(160))-BigInt(1)).toString(16)}var Tt=function(t){return function(){var r=n(l.mark((function r(e){return l.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.request(e);case 3:return r.abrupt("return",r.sent.data);case 8:if(r.prev=8,r.t0=r.catch(0),!t.isAxiosError(r.t0)){r.next=12;break}throw new x(r.t0);case 12:throw r.t0;case 13:case"end":return r.stop()}}),r,null,[[0,8]])})));return function(t){return r.apply(this,arguments)}}()},Ot=function(t){return function(){var r=n(l.mark((function r(e){var n,a,s,o,u,i,c;return l.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n=e.url,s=e.signal,o="POST"===(a=e.method)?JSON.stringify(e.data):null,u="POST"===a&&o?{"Content-Type":"application/json"}:void 0,r.next=6,t(n,{method:a,body:o,signal:s,headers:u});case 6:return i=r.sent,r.next=9,i.json();case 9:if(c=r.sent,i.ok){r.next=12;break}throw new x({code:String(i.status),response:{data:c,status:i.status,statusText:i.statusText,headers:Object.fromEntries(i.headers.entries()),config:{url:n,method:a}},message:i.statusText,isAxiosError:!1});case 12:return r.abrupt("return",c);case 15:if(r.prev=15,r.t0=r.catch(0),!(r.t0 instanceof x)){r.next=19;break}throw r.t0;case 19:throw new x(r.t0);case 20:case"end":return r.stop()}}),r,null,[[0,15]])})));return function(t){return r.apply(this,arguments)}}()},St=["block","gas"],Lt=["gas","from"],It=function(t,e){var s=t.ethersProviderOrSigner,o=t.EthersContract,u=function(){var t=n(l.mark((function t(r){var e,n,u,i,c,d,f,h,v;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.contractMethod,u=r.args,i=r.overrides,m(c=new o(r.address,r.abi,s),n),d=i.block,f=i.gas,h=p(i,St),v=a({},h,{blockTag:d,gasLimit:f}),t.abrupt("return",(e=c.callStatic)[n].apply(e,u.concat([v])));case 7:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}(),i=function(){var t=n(l.mark((function t(n){var u,i,c,d,f,h,v,k,y,g,w;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.assert(e,"account must be specified to create a signer"),r.assert(Rt(s)||Pt(s),"ethers must be an instance of Signer or JsonRpcProvider to create a signer"),u=n.address,i=n.abi,c=n.contractMethod,d=n.args,f=n.overrides,h="getSigner"in s?s.getSigner(e):s,m(v=new o(u,i,h),c),k=f.gas,y=p(f,Lt),g=a({},y,{gasLimit:k}),w=g,t.next=11,v[c].apply(v,d.concat([w]));case 11:return t.abrupt("return",t.sent);case 13:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}(),c=function(){var t=n(l.mark((function t(n){var a;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.assert(e,"account must be specified to create a signer"),r.assert(Rt(s)||Pt(s),"ethers must be an instance of Signer or JsonRpcProvider to create a signer"),a="getSigner"in s?s.getSigner(e):s,r.assert(Ct(a),"Signer can sign typed data"),t.abrupt("return",a._signTypedData(n.domain,n.types,n.data));case 6:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}();return{staticCall:u,transactCall:i,signTypedDataCall:c}};function Rt(t){return function(t){return"_isProvider"in t&&t._isProvider}(t)&&"getSigner"in t}function Pt(t){return"_isSigner"in t&&t._isSigner}function Ct(t){return"_signTypedData"in t}var Et=["block","gas"],Ft=["gas","from"],Bt=function(t,e){var s=function(){var e=n(l.mark((function e(n){var s,o,u,i,c,d,f,h;return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.assert(t.currentProvider,"web3.currentProvider is not set"),o=n.contractMethod,u=n.args,i=n.overrides,y(c=new t.eth.Contract(n.abi,n.address),o),d=i.gas,f=p(i,Et),h=a({},f,{gas:d}),e.abrupt("return",(s=c.methods)[o].apply(s,u).call(h));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(){var s=n(l.mark((function n(s){var o,u,i,c,d,f,h,v,m,k,g,w,x;return l.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.assert(t.currentProvider,"web3.currentProvider is not set"),r.assert(e,"account must be specified to send transactions"),u=s.contractMethod,i=s.args,c=s.overrides,y(d=new t.eth.Contract(s.abi,s.address),u),f=c.gas,h=c.from,v=p(c,Ft),r.assert(m=h||e,"from is required"),k=a({},v,{from:m,gas:f}),g=(o=d.methods)[u].apply(o,i),w=g.send(k),x={on:w.on.bind(w),once:w.once.bind(w)},n.abrupt("return",x);case 13:case"end":return n.stop()}}),n)})));return function(t){return s.apply(this,arguments)}}(),u=function(){var s=n(l.mark((function n(s){var o,u,i,c,p;return l.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.assert(t.currentProvider,"web3.currentProvider is not set"),r.assert(e,"account must be specified to sign data"),r.assert(Mt(o=t.currentProvider),"web3.currentProvider needs to be capable of sending arbitrary rpc calls"),u=s.data,i=s.domain,p={types:a({EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}]},c=s.types),primaryType:Ut(c),domain:i,message:u},n.next=8,new Promise((function(t,r){o.send({jsonrpc:"2.0",method:"eth_signTypedData",params:[e,p]},(function(e,n){if(e)return r(e);if(!n)throw new Error("No result in response to eth_signTypedData");t(n)}))}));case 8:return n.abrupt("return",n.sent.result);case 10:case"end":return n.stop()}}),n)})));return function(t){return s.apply(this,arguments)}}();return{staticCall:s,transactCall:o,signTypedDataCall:u}};function Mt(t){return!!t&&"object"==typeof t&&"send"in t}var Nt=/^([^\x5b]*)(\x5b|$)/;function Ut(t){var e=Object.keys(t),n=new Set(e);e.forEach((function(r){var e=t[r];e&&e.forEach((function(t){var r,e=null==(r=t.type.match(Nt))?void 0:r[1];e&&n.delete(e)}))}));var a=Array.from(n)[0];return r.assert(a,"No primary type found in SignableTypedData types, "+JSON.stringify(t)),a}var Dt=function(t){for(var r=arguments.length,e=new Array(r>1?r-1:0),n=1;n<r;n++)e[n-1]=arguments[n];var a=e.reduce((function(r,e){var n=e(t);return Object.assign(r,n)}),{});return a},_t=function(t){return Dt(t,F,G,O,R,V,B,_)},jt=function(t){var r=rt(t).buildLimitOrder,e=et(t).signLimitOrder,s=ot(t),o=s.postLimitOrder,u=s.postP2POrder,i=function(){var t=n(l.mark((function t(n,s){var o,u;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r(n);case 2:return o=t.sent,t.next=5,e(o);case 5:return u=a({},o.data,s,{signature:t.sent}),t.abrupt("return",u);case 8:case"end":return t.stop()}}),t)})));return function(r,e){return t.apply(this,arguments)}}(),c=function(){var t=n(l.mark((function t(r,e,n){var a;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e&&(e={}),t.next=3,i(r,e);case 3:return a=t.sent,t.next=6,o(a,n);case 6:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})));return function(r,e,n){return t.apply(this,arguments)}}(),p=function(){var t=n(l.mark((function t(r,e,n){var a;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e&&(e={}),t.next=3,i(r,e);case 3:return a=t.sent,t.next=6,u(a,n);case 6:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})));return function(r,e,n){return t.apply(this,arguments)}}();return{submitLimitOrder:c,submitP2POrder:p}},Gt=function(t){return a({},st(t),it(t),jt(t),rt(t),et(t),ot(t),at(t),ut(t),pt(t))},zt=function(t){var r=ft(t).buildNFTOrder,e=lt(t).signNFTOrder,s=mt(t),o=s.postNFTLimitOrder,u=s.postNFTP2POrder,i=function(){var t=n(l.mark((function t(n,s){var o,u;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r(n);case 2:return o=t.sent,t.next=5,e(o);case 5:return u=a({},o.data,s,{signature:t.sent}),t.abrupt("return",u);case 8:case"end":return t.stop()}}),t)})));return function(r,e){return t.apply(this,arguments)}}(),c=function(){var t=n(l.mark((function t(r,e,n){var a;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e&&(e={}),t.next=3,i(r,e);case 3:return a=t.sent,t.next=6,o(a,n);case 6:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})));return function(r,e,n){return t.apply(this,arguments)}}(),p=function(){var t=n(l.mark((function t(r,e,n){var a;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e&&(e={}),t.next=3,i(r,e);case 3:return a=t.sent,t.next=6,u(a,n);case 6:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})));return function(r,e,n){return t.apply(this,arguments)}}();return{submitNFTOrder:c,submitP2POrder:p}},Ht=function(t){return a({},vt(t),kt(t),zt(t),ft(t),lt(t),mt(t),ht(t),gt(t),xt(t))},qt=function(){function e(t){var e=t.chainId,n=void 0===e?1:e,a=t.apiURL,s=void 0===a?h:a,o=t.web3Provider,u=t.ethersDeps,i=t.account,c=t.axios,p=t.fetch;this.sdk={},this.fetcher=void 0,this.chainId=void 0,this.apiURL=void 0,this.web3Provider=void 0,this.ethersDeps=void 0,this.account=void 0,this.chainId=n,this.apiURL=s,this.web3Provider=o,this.ethersDeps=u,this.account=i;var d=c?Tt(c):p?Ot(p):null;if(r.assert(d,"at least one fetcher is needed"),this.fetcher=d,o||u){var f=u?It(u,i):o?Bt(o,i):null;f&&(this.sdk=_t({fetcher:d,contractCaller:f,apiURL:s,chainId:n}))}else this.sdk=Dt({fetcher:d,apiURL:s,chainId:n},F,G,O,V,B,_)}e.handleAPIError=function(t){if(!w(t))return{message:"Unknown error: "+t};if(!t.response)return{message:t.message};var r=t.response,e=r.data;return{status:r.status,message:A(e)?e.error:t.message,data:e}},e.extractHashFromTxResponse=function(){var t=n(l.mark((function t(r){return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!("once"in r)){t.next=2;break}return t.abrupt("return",new Promise((function(t,e){r.once("transactionHash",t),r.once("error",e)})));case 2:return t.next=4,r;case 4:return t.abrupt("return",t.sent.hash);case 7:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}();var a=e.prototype;return a.setWeb3Provider=function(t,r){var e=Bt(t,r);return this.sdk=_t({fetcher:this.fetcher,contractCaller:e,apiURL:this.apiURL,chainId:this.chainId}),this.web3Provider=t,this.ethersDeps=void 0,this.account=r,this},a.setEthersProvider=function(t,r){var e=It(t,r);return this.sdk=_t({fetcher:this.fetcher,contractCaller:e,apiURL:this.apiURL,chainId:this.chainId}),this.web3Provider=void 0,this.ethersDeps=t,this.account=r,this},a.getTokens=function(){var t=n(l.mark((function t(){return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.assert(this.sdk.getTokens,"sdk must be initialized with a fetcher"),t.prev=1,t.next=4,this.sdk.getTokens();case 4:return t.abrupt("return",t.sent);case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",e.handleAPIError(t.t0));case 10:case"end":return t.stop()}}),t,this,[[1,7]])})));return function(){return t.apply(this,arguments)}}(),a.getAdapters=function(){var t=n(l.mark((function t(){return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.assert(this.sdk.getAdapters,"sdk must be initialized with a fetcher"),t.prev=1,t.next=4,this.sdk.getAdapters({type:"object"});case 4:return t.abrupt("return",t.sent);case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",e.handleAPIError(t.t0));case 10:case"end":return t.stop()}}),t,this,[[1,7]])})));return function(){return t.apply(this,arguments)}}(),a.getRateByRoute=function(){var a=n(l.mark((function n(a,s,o,u,i,c,p){return l.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0===u&&(u=t.SwapSide.SELL),r.assert(this.sdk.getRateByRoute,"sdk must be initialized with a fetcher"),!(a.length<2)){n.next=4;break}return n.abrupt("return",{message:"Invalid Route"});case 4:return n.prev=4,n.next=7,this.sdk.getRateByRoute({route:a,amount:s,userAddress:o,side:u,options:i,srcDecimals:c,destDecimals:p});case 7:return n.abrupt("return",n.sent);case 10:return n.prev=10,n.t0=n.catch(4),n.abrupt("return",e.handleAPIError(n.t0));case 13:case"end":return n.stop()}}),n,this,[[4,10]])})));return function(t,r,e,n,s,o,u){return a.apply(this,arguments)}}(),a.getRate=function(){var a=n(l.mark((function n(a,s,o,u,i,c,p,d){return l.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return void 0===i&&(i=t.SwapSide.SELL),void 0===c&&(c={}),r.assert(this.sdk.getRate,"sdk must be initialized with a fetcher"),n.prev=3,n.next=6,this.sdk.getRate({srcToken:a,destToken:s,amount:o,userAddress:u,side:i,options:c,srcDecimals:p,destDecimals:d});case 6:return n.abrupt("return",n.sent);case 9:return n.prev=9,n.t0=n.catch(3),n.abrupt("return",e.handleAPIError(n.t0));case 12:case"end":return n.stop()}}),n,this,[[3,9]])})));return function(t,r,e,n,s,o,u,i){return a.apply(this,arguments)}}(),a.buildTx=function(){var t=n(l.mark((function t(n,a,s,o,u,i,c,p,d,f,h,v,m,k,y){return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===h&&(h={}),r.assert(this.sdk.buildTx,"sdk must be initialized with a fetcher"),t.prev=2,t.next=5,this.sdk.buildTx({srcToken:n,destToken:a,srcAmount:s,destAmount:o,priceRoute:u,userAddress:i,partner:c,partnerAddress:p,partnerFeeBps:d,receiver:f,srcDecimals:v,destDecimals:m,permit:k,deadline:y},h);case 5:return t.abrupt("return",t.sent);case 8:return t.prev=8,t.t0=t.catch(2),t.abrupt("return",e.handleAPIError(t.t0));case 11:case"end":return t.stop()}}),t,this,[[2,8]])})));return function(r,e,n,a,s,o,u,i,c,p,d,f,l,h,v){return t.apply(this,arguments)}}(),a.getTokenTransferProxy=function(){var t=n(l.mark((function t(n){return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.assert(this.sdk.getSpender,"sdk must be initialized with a fetcher"),t.prev=1,t.next=4,this.sdk.getSpender();case 4:return t.abrupt("return",t.sent);case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",e.handleAPIError(t.t0));case 10:case"end":return t.stop()}}),t,this,[[1,7]])})));return function(r){return t.apply(this,arguments)}}(),a.getAllowances=function(){var t=n(l.mark((function t(n,a){return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.assert(this.sdk.getAllowances,"sdk must be initialized with a fetcher"),t.prev=1,t.next=4,this.sdk.getAllowances(n,a);case 4:return t.abrupt("return",t.sent);case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",e.handleAPIError(t.t0));case 10:case"end":return t.stop()}}),t,this,[[1,7]])})));return function(r,e){return t.apply(this,arguments)}}(),a.getAllowance=function(){var t=n(l.mark((function t(n,a){return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.assert(this.sdk.getAllowance,"sdk must be initialized with a fetcher"),t.prev=1,t.next=4,this.sdk.getAllowance(n,a);case 4:return t.abrupt("return",t.sent);case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",e.handleAPIError(t.t0));case 10:case"end":return t.stop()}}),t,this,[[1,7]])})));return function(r,e){return t.apply(this,arguments)}}(),a.approveTokenBulk=function(){var t=n(l.mark((function t(n,a,s,o){var u;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.assert(this.sdk.approveTokenBulk,"sdk must be initialized with a provider"),t.prev=1,t.next=4,this.sdk.approveTokenBulk(n,s);case 4:return u=t.sent,t.next=7,Promise.all(u.map(e.extractHashFromTxResponse));case 7:return t.abrupt("return",t.sent);case 10:return t.prev=10,t.t0=t.catch(1),t.abrupt("return",e.handleAPIError(t.t0));case 13:case"end":return t.stop()}}),t,this,[[1,10]])})));return function(r,e,n,a){return t.apply(this,arguments)}}(),a.approveToken=function(){var t=n(l.mark((function t(n,a,s,o,u){var i;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.assert(this.sdk.approveToken,"sdk must be initialized with a provider"),t.prev=1,t.next=4,this.sdk.approveToken(n,s);case 4:return i=t.sent,t.next=7,e.extractHashFromTxResponse(i);case 7:return t.abrupt("return",t.sent);case 10:return t.prev=10,t.t0=t.catch(1),t.abrupt("return",e.handleAPIError(t.t0));case 13:case"end":return t.stop()}}),t,this,[[1,10]])})));return function(r,e,n,a,s){return t.apply(this,arguments)}}(),a.getMarketNames=function(){var t=n(l.mark((function t(){return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.assert(this.sdk.getAdapters,"sdk must be initialized with a fetcher"),t.prev=1,t.next=4,this.sdk.getAdapters({type:"list",namesOnly:!0});case 4:return t.abrupt("return",t.sent);case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",e.handleAPIError(t.t0));case 10:case"end":return t.stop()}}),t,this,[[1,7]])})));return function(){return t.apply(this,arguments)}}(),a.getBalance=function(){var t=n(l.mark((function t(n,a){return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.assert(this.sdk.getBalance,"sdk must be initialized with a fetcher"),t.prev=1,t.next=4,this.sdk.getBalance(n,a);case 4:return t.abrupt("return",t.sent);case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",e.handleAPIError(t.t0));case 10:case"end":return t.stop()}}),t,this,[[1,7]])})));return function(r,e){return t.apply(this,arguments)}}(),a.getBalances=function(){var t=n(l.mark((function t(n){return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.assert(this.sdk.getBalances,"sdk must be initialized with a fetcher"),t.prev=1,t.next=4,this.sdk.getBalances(n);case 4:return t.abrupt("return",t.sent);case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",e.handleAPIError(t.t0));case 10:case"end":return t.stop()}}),t,this,[[1,7]])})));return function(r){return t.apply(this,arguments)}}(),e}();Object.defineProperty(exports,"ContractMethod",{enumerable:!0,get:function(){return t.ContractMethod}}),Object.defineProperty(exports,"SwapSide",{enumerable:!0,get:function(){return t.SwapSide}}),exports.API_URL=h,exports.AssetType={ERC20:0,ERC1155:1,ERC721:2},exports.ParaSwap=qt,exports.constructAllLimitOrdersHandlers=Gt,exports.constructAllNFTOrdersHandlers=Ht,exports.constructApproveToken=R,exports.constructApproveTokenForLimitOrder=ut,exports.constructApproveTokenForNFTOrder=gt,exports.constructAxiosFetcher=Tt,exports.constructBuildLimitOrder=rt,exports.constructBuildLimitOrderTx=pt,exports.constructBuildNFTOrder=ft,exports.constructBuildNFTOrderTx=xt,exports.constructBuildTx=V,exports.constructCancelLimitOrder=at,exports.constructCancelNFTOrder=ht,exports.constructEthersContractCaller=It,exports.constructFetchFetcher=Ot,exports.constructFullSDK=function(t){return{swap:_t(t),limitOrders:Gt(t),nftOrders:Ht(t)}},exports.constructGetAdapters=B,exports.constructGetBalances=F,exports.constructGetLimitOrders=st,exports.constructGetLimitOrdersContract=it,exports.constructGetNFTOrders=vt,exports.constructGetNFTOrdersContract=kt,exports.constructGetRate=_,exports.constructGetSpender=O,exports.constructGetTokens=G,exports.constructPartialSDK=Dt,exports.constructPostLimitOrder=ot,exports.constructPostNFTOrder=mt,exports.constructSignLimitOrder=et,exports.constructSignNFTOrder=lt,exports.constructSimpleSDK=function(t,r){var e="axios"in t?Tt(t.axios):Ot(t.fetch);if(!r){var a={apiURL:t.apiURL,chainId:t.chainId,fetcher:e};return{swap:Dt(a,F,G,O,V,B,_),limitOrders:Dt(a,rt,ot,st,it,pt),nftOrders:Dt(a,ft,mt,vt,kt,xt)}}var s=function(t){if("ethersProviderOrSigner"in t){var r=It(t,t.account),e=r.staticCall,a=r.transactCall,s=r.signTypedDataCall,o=function(){var t=n(l.mark((function t(r){return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a(r);case 2:return t.abrupt("return",t.sent.hash);case 4:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}();return{staticCall:e,transactCall:o,signTypedDataCall:s}}var u=Bt(t.web3,t.account),i=u.staticCall,c=u.transactCall,p=u.signTypedDataCall,d=function(){var t=n(l.mark((function t(r){var e;return l.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c(r);case 2:return e=t.sent,t.abrupt("return",new Promise((function(t,r){e.once("transactionHash",t),e.once("error",r)})));case 4:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}();return{staticCall:i,transactCall:d,signTypedDataCall:p}}(r),o={apiURL:t.apiURL,chainId:t.chainId,fetcher:e,contractCaller:s};return{swap:_t(o),limitOrders:Gt(o),nftOrders:Ht(o)}},exports.constructSubmitLimitOrder=jt,exports.constructSubmitNFTOrder=zt,exports.constructSwapSDK=_t,exports.constructToken=C,exports.constructWeb3ContractCaller=Bt,exports.isAllowance=function(t){return"allowance"in t},exports.isFetcherError=w;
//# sourceMappingURL=sdk.cjs.production.min.js.map
